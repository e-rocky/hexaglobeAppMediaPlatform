<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Cast Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


</head>

<body>
    <div class="container pt-4">
        <div class="card text-dark bg-light">
            <div class="card-header">Enter a URL for an M3U8 video.</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-12 mb-3"><input id="url" class="form-control" type="text" value="https://live.retrostrange.com/hls/stream.m3u8"></div>
                    <div class="col-12"><button id="cast" class="form-control btn-primary"> Cast </button></div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/castjs/5.2.0/cast.min.js"></script>
    <script>
        var url = new URL(window.location.href);
        var domain = url.searchParams.get("s");
        var input = document.querySelector('#url')
        const cjs = new Castjs();
        document.getElementById('cast').addEventListener('click', function () {
            if (cjs.available) {
                //cjs.cast(domain + '/hls/stream.m3u8', {
                alert(input.value)
                cjs.cast('https://live.retrostrange.com/hls/stream.m3u8', {
                    poster: domain + '/logo',
                    title: domain,
                    description: 'Owncast live stream'
                })
            }
        });
    </script>
</body>

</html>